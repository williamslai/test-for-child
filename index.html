
<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <title>æ²¹æ¡èŠ±äº’å‹•æ¸¬é©—ãƒ»20é¡ŒéŠæˆ²éŸ³æ•ˆç‰ˆ</title>
  <style>
    body {
      font-family: "Segoe UI", sans-serif;
      margin: 0;
      background-color: #f0f2f5;
      overflow: hidden;
    }
    #questionBox {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      z-index: 10;
      background-color: #2b579a;
      color: white;
      padding: 40px 60px;
      border-radius: 10px;
      box-shadow: 0 0 12px rgba(0,0,0,0.3);
      text-align: center;
      font-size: 36px;
    }
    #gameArea {
      position: relative;
      width: 100vw;
      height: 100vh;
      overflow: hidden;
    }
    .floatingOption {
      position: absolute;
      font-size: 32px;
      background-color: white;
      border: 2px solid #2b579a;
      border-radius: 999px;
      padding: 20px 36px;
      cursor: pointer;
      box-shadow: 0 2px 6px rgba(0,0,0,0.2);
      transition: transform 0.3s;
    }
    .floatingOption:hover {
      transform: scale(1.1);
    }
    #result {
      position: absolute;
      bottom: 20px;
      left: 20px;
      font-weight: bold;
      font-size: 28px;
      color: #2b579a;
    }
  </style>
  <audio id="correctSound" src="https://cdn.pixabay.com/audio/2022/03/15/audio_f4c7ccf2df.mp3" preload="auto"></audio>
  <audio id="wrongSound" src="https://cdn.pixabay.com/audio/2022/03/15/audio_77b0d8430a.mp3" preload="auto"></audio>
</head>
<body>

<div id="questionBox">
  é¡Œç›®ï¼š<span id="questionText">è¼‰å…¥ä¸­...</span>
</div>
<div id="gameArea">
  <div id="result"></div>
</div>

<script>

let fullQuestions = [
  // èª²æ–‡ç†è§£ï¼ˆ10 é¡Œï¼‰
  { id: 1, q: "èª²æ–‡ä¸­æåˆ°ï¼Œæ²¹æ¡èŠ±çš„èŠ±ç“£åƒä»€éº¼ï¼Ÿ", ans: "é›ªèŠ±", opts: ["é›ªèŠ±", "æ˜Ÿæ˜Ÿ", "é›²æœµ", "æ£‰èŠ±"] },
  { id: 2, q: "æ²¹æ¡èŠ±çš„èŠ±æœŸä¸»è¦åœ¨ä»€éº¼æ™‚å€™ï¼Ÿ", ans: "äº”æœˆ", opts: ["äº”æœˆ", "ä¸€æœˆ", "ä¸‰æœˆ", "ä¸ƒæœˆ"] },
  { id: 3, q: "èª²æ–‡ä¸­å½¢å®¹æ²¹æ¡èŠ±é£„è½çš„æ¨£å­æ˜¯ï¼Ÿ", ans: "åƒä¸‹é›ªä¸€æ¨£", opts: ["åƒä¸‹é›ªä¸€æ¨£", "åƒä¸‹é›¨ä¸€æ¨£", "åƒè½è‘‰ä¸€æ¨£", "åƒç…™éœ§ä¸€æ¨£"] },
  { id: 4, q: "æ²¹æ¡èŠ±çš„é¡è‰²æ˜¯ä»€éº¼ï¼Ÿ", ans: "é›ªç™½è‰²", opts: ["é›ªç™½è‰²", "ç²‰ç´…è‰²", "æ·¡é»ƒè‰²", "æ·ºç´«è‰²"] },
  { id: 5, q: "èª²æ–‡ä¸­æåˆ°ï¼Œæ²¹æ¡èŠ±çš„èŠ±ç“£æ•¸é‡æ˜¯ï¼Ÿ", ans: "äº”ç‰‡", opts: ["äº”ç‰‡", "ä¸‰ç‰‡", "å››ç‰‡", "å…­ç‰‡"] },
  { id: 6, q: "æ²¹æ¡èŠ±ç››é–‹æ™‚ï¼Œå¸¸è¢«æ¯”å–»ç‚ºä»€éº¼ï¼Ÿ", ans: "äº”æœˆé›ª", opts: ["äº”æœˆé›ª", "æ˜¥å¤©çš„ä½¿è€…", "å¤æ—¥çš„é™½å…‰", "ç§‹å¤©çš„è½è‘‰"] },
  { id: 7, q: "èª²æ–‡ä¸­æåˆ°ï¼Œæ²¹æ¡èŠ±çš„èŠ±æœµæœƒé£„è½åœ¨å“ªè£¡ï¼Ÿ", ans: "è·¯é¢ä¸Š", opts: ["è·¯é¢ä¸Š", "æ²³æµä¸Š", "è‰åœ°ä¸Š", "å±‹é ‚ä¸Š"] },
  { id: 8, q: "æ²¹æ¡èŠ±çš„èŠ±ç“£å½¢ç‹€åƒä»€éº¼ï¼Ÿ", ans: "å¿ƒå½¢", opts: ["å¿ƒå½¢", "æ˜Ÿå½¢", "æ‰‹æŒå½¢", "æ©¢åœ“å½¢"] },
  { id: 9, q: "èª²æ–‡ä¸­æåˆ°ï¼Œæ²¹æ¡èŠ±çš„èŠ±ç“£æ‰è½å¾Œæœƒï¼Ÿ", ans: "èˆ–æˆç™½è‰²åœ°æ¯¯", opts: ["èˆ–æˆç™½è‰²åœ°æ¯¯", "è¿…é€Ÿæ¯è", "ç•™ä¸‹é¦™å‘³", "è¢«é¢¨å¹èµ°"] },
  { id: 10, q: "èª²æ–‡ä¸­ï¼Œä½œè€…å°æ²¹æ¡èŠ±çš„æƒ…æ„Ÿæ˜¯ï¼Ÿ", ans: "å–œæ„›èˆ‡è®šç¾", opts: ["å–œæ„›èˆ‡è®šç¾", "ç„¡æ„Ÿ", "å­æƒ¡", "ææ‡¼"] },

  // åœ‹å­—æ³¨éŸ³ï¼ˆ6 é¡Œï¼‰
  { id: 11, q: "ã€Œæ¡ã€çš„æ­£ç¢ºæ³¨éŸ³æ˜¯ï¼Ÿ", ans: "ã„Šã„¨ã„¥ËŠ", opts: ["ã„Šã„¨ã„¥ËŠ", "ã„Šã„¨ã„£ËŠ", "ã„Šã„¨ã„¥Ë‹", "ã„Šã„¨ã„£Ë‹"] },
  { id: 12, q: "ã€Œç“£ã€çš„æ­£ç¢ºæ³¨éŸ³æ˜¯ï¼Ÿ", ans: "ã„…ã„¢Ë‹", opts: ["ã„…ã„¢Ë‹", "ã„†ã„¢Ë‹", "ã„ˆã„¢Ë‹", "ã„…ã„§ã„¢Ë‹"] },
  { id: 13, q: "å“ªå€‹å­—çš„æ³¨éŸ³æ˜¯ã€Œã„…ã„ Ë‹ã€ï¼Ÿ", ans: "æŠ±", opts: ["æŠ±", "å ±", "è·‘", "æ³¡"] },
  { id: 14, q: "ã€Œé›ªã€çš„æ­£ç¢ºæ³¨éŸ³æ˜¯ï¼Ÿ", ans: "ã„’ã„©ã„Ë‡", opts: ["ã„’ã„©ã„Ë‡", "ã„’ã„©ã„", "ã„’ã„¨ã„Ë‡", "ã„’ã„©Ë‹"] },
  { id: 15, q: "ã€Œé£„ã€çš„æ­£ç¢ºæ³¨éŸ³æ˜¯ï¼Ÿ", ans: "ã„†ã„§ã„ ", opts: ["ã„†ã„§ã„ ", "ã„†ã„§ã„ Ë‡", "ã„†ã„ ", "ã„†ã„§ã„ ËŠ"] },
  { id: 16, q: "ã€Œä½œè€…ã€çš„ã€Œè€…ã€æ³¨éŸ³æ˜¯ï¼Ÿ", ans: "ã„“ã„œË‡", opts: ["ã„“ã„œË‡", "ã„“ã„¨ã„›Ë‡", "ã„“ã„ Ë‡", "ã„ã„§ã„Ë‡"] },

  // å­—éŸ³å­—å½¢ï¼ˆ4 é¡Œï¼‰
  { id: 17, q: "ä¸‹åˆ—å“ªä¸€å€‹å­—èˆ‡ã€Œæ¡ã€çš„æ„æ€æœ€ä¸åŒï¼Ÿ", ans: "æ¡¶", opts: ["æ¡¶", "æ¥“", "æ¨¹", "æ—"] },
  { id: 18, q: "ã€Œé£„è½ã€çš„ã€Œé£„ã€æ„æ€æ˜¯ï¼Ÿ", ans: "éš¨é¢¨ç§»å‹•", opts: ["éš¨é¢¨ç§»å‹•", "è·³èˆ", "é£›ç¿”", "æ®ç‘"] },
  { id: 19, q: "ã€Œé›ªç™½ã€ä¸­ã€Œé›ªã€æ˜¯æ¯”å–»ä»€éº¼ï¼Ÿ", ans: "é¡è‰²", opts: ["é¡è‰²", "å¤©æ°£", "å†°å¡Š", "å­£ç¯€"] },
  { id: 20, q: "å“ªå€‹è©èªå’Œã€ŒèŠ±ç“£ã€çš„é—œä¿‚æœ€å¯†åˆ‡ï¼Ÿ", ans: "èŠ±æœµ", opts: ["èŠ±æœµ", "è‘‰å­", "æœå¯¦", "æå¹¹"] },

  // æˆèªæ‡‰ç”¨ï¼ˆ2 é¡Œï¼‰
  { id: 21, q: "èª²æ–‡ä¸­çš„ã€Œäº”æœˆé›ªã€æ˜¯ä»€éº¼ä¿®è¾­ï¼Ÿ", ans: "æ¯”å–»", opts: ["æ¯”å–»", "æ“¬äºº", "èª‡å¼µ", "æ’æ¯”"] },
  { id: 22, q: "ä¸‹åˆ—å“ªä¸€å¥æœ€èƒ½æè¿°æ²¹æ¡èŠ±ç››é–‹ï¼Ÿ", ans: "åƒä¸‹é›ªä¸€æ¨£é‹ªæ»¿å±±é ­", opts: ["åƒä¸‹é›ªä¸€æ¨£é‹ªæ»¿å±±é ­", "é¢¨å¤§åˆ°é£›èµ·ä¾†", "å¤ªé™½å¥½å¤§å•Š", "åƒåœ¨æ£®æ—è£¡è¿·è·¯"] },

  // æ¨™é»ç¬¦è™Ÿï¼ˆ3 é¡Œï¼‰
  { id: 23, q: "å“ªä¸€å¥çš„æ¨™é»ç”¨æ³•æ­£ç¢ºï¼Ÿ", ans: "æ²¹æ¡èŠ±ï¼Œåƒé›ªä¸€æ¨£é£„è½ã€‚", opts: ["æ²¹æ¡èŠ±ï¼Œåƒé›ªä¸€æ¨£é£„è½ã€‚", "æ²¹æ¡èŠ±åƒé›ªä¸€æ¨£é£„è½ï¼Œ", "æ²¹æ¡èŠ±åƒé›ªä¸€æ¨£é£„è½ï¼ã€‚", "æ²¹æ¡èŠ±åƒé›ªä¸€æ¨£é£„è½ï¼Ÿã€‚"] },
  { id: 24, q: "å“ªä¸€å¥ä½¿ç”¨äº†å•è™Ÿï¼Ÿ", ans: "ä½ çœ‹è¦‹æ²¹æ¡èŠ±äº†å—ï¼Ÿ", opts: ["ä½ çœ‹è¦‹æ²¹æ¡èŠ±äº†å—ï¼Ÿ", "æ²¹æ¡èŠ±ç››é–‹äº†ã€‚", "æ²¹æ¡èŠ±çœŸæ¼‚äº®ï¼", "æ²¹æ¡èŠ±åƒé›ªä¸€æ¨£ã€‚"] },
  { id: 25, q: "å“ªä¸€å¥æœ€é©åˆç”¨é©šå˜†è™Ÿï¼Ÿ", ans: "æ²¹æ¡èŠ±çœŸç¾å•Šï¼", opts: ["æ²¹æ¡èŠ±çœŸç¾å•Šï¼", "æ²¹æ¡èŠ±çœŸç¾å•Šã€‚", "æ²¹æ¡èŠ±çœŸç¾å•Šï¼Ÿ", "æ²¹æ¡èŠ±çœŸç¾å•Šâ€¦"] }
];


let questionQueue = fullQuestions.slice();
let currentQ = 0;
let isRetrying = false;
let retrySet = new Set();
let retryQueue = [];
let retryCorrectOnFirstTry = {};

function shuffle(arr) {
  for (let i = arr.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [arr[i], arr[j]] = [arr[j], arr[i]];
  }
}

function showQuestion() {
  const q = questionQueue[currentQ];
  q.hasBeenAnswered = false;

  document.getElementById("questionText").innerText = q.q;
  const area = document.getElementById("gameArea");
  const result = document.getElementById("result");
  result.innerText = "";

  const oldOptions = document.querySelectorAll(".floatingOption");
  oldOptions.forEach(o => o.remove());

  shuffle(q.opts);
  q.opts.slice(0, 4).forEach((opt, i) => {
    const el = document.createElement("div");
    el.className = "floatingOption";
    el.innerText = opt;
    el.style.left = (100 + i * 160) + "px";
    el.style.top = (150 + i * 100) + "px";
    el.dataset.active = "true";
    area.appendChild(el);

    let vx = (Math.random() > 0.5 ? 1 : -1) * (1 + Math.random() * 1.5);
    let vy = (Math.random() > 0.5 ? 1 : -1) * (1 + Math.random() * 1.5);

    function move() {
      if (el.dataset.active !== "true") return;
      let x = el.offsetLeft + vx;
      let y = el.offsetTop + vy;
      if (x <= 0 || x + el.offsetWidth >= window.innerWidth) vx *= -1;
      if (y <= 0 || y + el.offsetHeight >= window.innerHeight) vy *= -1;
      el.style.left = x + "px";
      el.style.top = y + "px";
      requestAnimationFrame(move);
    }
    move();

    el.onclick = () => {
      if (opt === q.ans) {
        document.getElementById("correctSound").play();
        result.innerText = "âœ… ç­”å°äº†ï¼";
        result.style.color = "#107c10";

        if (isRetrying && !retryCorrectOnFirstTry[q.id]) {
          retryCorrectOnFirstTry[q.id] = true;
        }

        currentQ++;
        setTimeout(() => {
          if (currentQ < questionQueue.length) {
            showQuestion();
          } else {
            if (!isRetrying) {
              retryQueue = fullQuestions.filter(q => retrySet.has(q.id));
              if (retryQueue.length > 0) {
                isRetrying = true;
                questionQueue = retryQueue.slice();
                currentQ = 0;
                retryCorrectOnFirstTry = {};
                result.innerText = "ğŸ” éŒ¯é¡Œå†æŒ‘æˆ°é–‹å§‹...";
                setTimeout(showQuestion, 1000);
              } else {
                showComplete(area);
              }
            } else {
              retryQueue = retryQueue.filter(q => !retryCorrectOnFirstTry[q.id]);
              if (retryQueue.length > 0) {
                questionQueue = retryQueue.slice();
                currentQ = 0;
                retryCorrectOnFirstTry = {};
                result.innerText = "ğŸ” éŒ¯é¡Œå†æŒ‘æˆ°ç¹¼çºŒ...";
                setTimeout(showQuestion, 1000);
              } else {
                showComplete(area);
              }
            }
          }
        }, 1000);
      } else {
        document.getElementById("wrongSound").play();
        result.innerText = "âŒ ç­”éŒ¯äº†ï¼Œå†è©¦ä¸€æ¬¡ï¼";
        result.style.color = "#d13438";
        retrySet.add(q.id);
      }
    };
  });
}

function showComplete(area) {
  area.innerHTML = "<h2 style='padding: 20px;'>ğŸ‰ æ¸¬é©—å®Œæˆï¼æ‰€æœ‰é¡Œç›®éƒ½ç­”å°äº†ï¼</h2>";
  document.getElementById("questionBox").innerText = "çµæŸ";
}

showQuestion();
</script>
</body>
</html>
